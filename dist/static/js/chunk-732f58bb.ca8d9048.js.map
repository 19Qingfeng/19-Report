{"version":3,"sources":["webpack:///./src/views/permission/role.vue?154e","webpack:///./src/views/permission/role.vue?5c77","webpack:///./src/api/role.js","webpack:///src/views/permission/role.vue","webpack:///./src/views/permission/role.vue?e171","webpack:///./src/views/permission/role.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","handleAddRole","_v","staticStyle","rolesList","scopedSlots","_u","key","fn","scope","_s","row","name","description","$event","handleEdit","handleDelete","dialogVisible","dialogType","role","model","value","callback","$$v","$set","expression","minRows","maxRows","ref","checkStrictly","routesData","defaultProps","confirmRole","staticRenderFns","getRoutes","request","url","method","getRoles","addRole","data","updateRole","id","deleteRole","routes","Object","assign","defaultRole","children","label","computed","created","methods","generateRoutes","res","generateArr","forEach","push","route","temp","length","$refs","tree","setCheckedNodes","$nextTick","$confirm","confirmButtonText","cancelButtonText","type","generateTree","onlyOneShowingChild","showingChildren","onlyOneChild","path","component"],"mappings":"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","file":"static/js/chunk-732f58bb.ca8d9048.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=style&index=0&id=06a995ff&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=style&index=0&id=06a995ff&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAddRole}},[_vm._v(\"New Role\")]),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"30px\"},attrs:{\"data\":_vm.rolesList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"Role Key\",\"width\":\"220\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.key)+\" \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"Role Name\",\"width\":\"220\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.name)+\" \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"header-center\",\"label\":\"Description\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.description)+\" \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"Operations\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleEdit(scope)}}},[_vm._v(\"Edit\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDelete(scope)}}},[_vm._v(\"Delete\")])]}}])})],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"title\":_vm.dialogType==='edit'?'Edit Role':'New Role'},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.role,\"label-width\":\"80px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"Name\"}},[_c('el-input',{attrs:{\"placeholder\":\"Role Name\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", $$v)},expression:\"role.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Desc\"}},[_c('el-input',{attrs:{\"autosize\":{ minRows: 2, maxRows: 4},\"type\":\"textarea\",\"placeholder\":\"Role Description\"},model:{value:(_vm.role.description),callback:function ($$v) {_vm.$set(_vm.role, \"description\", $$v)},expression:\"role.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Menus\"}},[_c('el-tree',{ref:\"tree\",staticClass:\"permission-tree\",attrs:{\"check-strictly\":_vm.checkStrictly,\"data\":_vm.routesData,\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"node-key\":\"path\"}})],1)],1),_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.dialogVisible=false}}},[_vm._v(\"Cancel\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmRole}},[_vm._v(\"Confirm\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\nexport function getRoutes() {\r\n  return request({\r\n    url: '/vue-element-admin/routes',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getRoles() {\r\n  return request({\r\n    url: '/vue-element-admin/roles',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function addRole(data) {\r\n  return request({\r\n    url: '/vue-element-admin/role',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function updateRole(id, data) {\r\n  return request({\r\n    url: `/vue-element-admin/role/${id}`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deleteRole(id) {\r\n  return request({\r\n    url: `/vue-element-admin/role/${id}`,\r\n    method: 'delete'\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"app-container\">\r\n    <el-button type=\"primary\" @click=\"handleAddRole\">New Role</el-button>\r\n\r\n    <el-table :data=\"rolesList\" style=\"width: 100%;margin-top:30px;\" border>\r\n      <el-table-column align=\"center\" label=\"Role Key\" width=\"220\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.key }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"Role Name\" width=\"220\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.name }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"header-center\" label=\"Description\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.description }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"Operations\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope)\">Edit</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope)\">Delete</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\" :title=\"dialogType==='edit'?'Edit Role':'New Role'\">\r\n      <el-form :model=\"role\" label-width=\"80px\" label-position=\"left\">\r\n        <el-form-item label=\"Name\">\r\n          <el-input v-model=\"role.name\" placeholder=\"Role Name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Desc\">\r\n          <el-input\r\n            v-model=\"role.description\"\r\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n            type=\"textarea\"\r\n            placeholder=\"Role Description\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"Menus\">\r\n          <el-tree\r\n            ref=\"tree\"\r\n            :check-strictly=\"checkStrictly\"\r\n            :data=\"routesData\"\r\n            :props=\"defaultProps\"\r\n            show-checkbox\r\n            node-key=\"path\"\r\n            class=\"permission-tree\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div style=\"text-align:right;\">\r\n        <el-button type=\"danger\" @click=\"dialogVisible=false\">Cancel</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmRole\">Confirm</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport path from 'path'\r\nimport { deepClone } from '@/utils'\r\nimport { getRoutes, getRoles, addRole, deleteRole, updateRole } from '@/api/role'\r\n\r\nconst defaultRole = {\r\n  key: '',\r\n  name: '',\r\n  description: '',\r\n  routes: []\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      role: Object.assign({}, defaultRole),\r\n      routes: [],\r\n      rolesList: [],\r\n      dialogVisible: false,\r\n      dialogType: 'new',\r\n      checkStrictly: false,\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'title'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    routesData() {\r\n      return this.routes\r\n    }\r\n  },\r\n  created() {\r\n    // Mock: get all routes and roles list from server\r\n    this.getRoutes()\r\n    this.getRoles()\r\n  },\r\n  methods: {\r\n    async getRoutes() {\r\n      const res = await getRoutes()\r\n      this.serviceRoutes = res.data\r\n      this.routes = this.generateRoutes(res.data)\r\n    },\r\n    async getRoles() {\r\n      const res = await getRoles()\r\n      this.rolesList = res.data\r\n    },\r\n\r\n    // Reshape the routes structure so that it looks the same as the sidebar\r\n    generateRoutes(routes, basePath = '/') {\r\n      const res = []\r\n\r\n      for (let route of routes) {\r\n        // skip some route\r\n        if (route.hidden) { continue }\r\n\r\n        const onlyOneShowingChild = this.onlyOneShowingChild(route.children, route)\r\n\r\n        if (route.children && onlyOneShowingChild && !route.alwaysShow) {\r\n          route = onlyOneShowingChild\r\n        }\r\n\r\n        const data = {\r\n          path: path.resolve(basePath, route.path),\r\n          title: route.meta && route.meta.title\r\n\r\n        }\r\n\r\n        // recursive child routes\r\n        if (route.children) {\r\n          data.children = this.generateRoutes(route.children, data.path)\r\n        }\r\n        res.push(data)\r\n      }\r\n      return res\r\n    },\r\n    generateArr(routes) {\r\n      let data = []\r\n      routes.forEach(route => {\r\n        data.push(route)\r\n        if (route.children) {\r\n          const temp = this.generateArr(route.children)\r\n          if (temp.length > 0) {\r\n            data = [...data, ...temp]\r\n          }\r\n        }\r\n      })\r\n      return data\r\n    },\r\n    handleAddRole() {\r\n      this.role = Object.assign({}, defaultRole)\r\n      if (this.$refs.tree) {\r\n        this.$refs.tree.setCheckedNodes([])\r\n      }\r\n      this.dialogType = 'new'\r\n      this.dialogVisible = true\r\n    },\r\n    handleEdit(scope) {\r\n      this.dialogType = 'edit'\r\n      this.dialogVisible = true\r\n      this.checkStrictly = true\r\n      this.role = deepClone(scope.row)\r\n      this.$nextTick(() => {\r\n        const routes = this.generateRoutes(this.role.routes)\r\n        this.$refs.tree.setCheckedNodes(this.generateArr(routes))\r\n        // set checked state of a node not affects its father and child nodes\r\n        this.checkStrictly = false\r\n      })\r\n    },\r\n    handleDelete({ $index, row }) {\r\n      this.$confirm('Confirm to remove the role?', 'Warning', {\r\n        confirmButtonText: 'Confirm',\r\n        cancelButtonText: 'Cancel',\r\n        type: 'warning'\r\n      })\r\n        .then(async() => {\r\n          await deleteRole(row.key)\r\n          this.rolesList.splice($index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: 'Delete succed!'\r\n          })\r\n        })\r\n        .catch(err => { console.error(err) })\r\n    },\r\n    generateTree(routes, basePath = '/', checkedKeys) {\r\n      const res = []\r\n\r\n      for (const route of routes) {\r\n        const routePath = path.resolve(basePath, route.path)\r\n\r\n        // recursive child routes\r\n        if (route.children) {\r\n          route.children = this.generateTree(route.children, routePath, checkedKeys)\r\n        }\r\n\r\n        if (checkedKeys.includes(routePath) || (route.children && route.children.length >= 1)) {\r\n          res.push(route)\r\n        }\r\n      }\r\n      return res\r\n    },\r\n    async confirmRole() {\r\n      const isEdit = this.dialogType === 'edit'\r\n\r\n      const checkedKeys = this.$refs.tree.getCheckedKeys()\r\n      this.role.routes = this.generateTree(deepClone(this.serviceRoutes), '/', checkedKeys)\r\n\r\n      if (isEdit) {\r\n        await updateRole(this.role.key, this.role)\r\n        for (let index = 0; index < this.rolesList.length; index++) {\r\n          if (this.rolesList[index].key === this.role.key) {\r\n            this.rolesList.splice(index, 1, Object.assign({}, this.role))\r\n            break\r\n          }\r\n        }\r\n      } else {\r\n        const { data } = await addRole(this.role)\r\n        this.role.key = data.key\r\n        this.rolesList.push(this.role)\r\n      }\r\n\r\n      const { description, key, name } = this.role\r\n      this.dialogVisible = false\r\n      this.$notify({\r\n        title: 'Success',\r\n        dangerouslyUseHTMLString: true,\r\n        message: `\r\n            <div>Role Key: ${key}</div>\r\n            <div>Role Name: ${name}</div>\r\n            <div>Description: ${description}</div>\r\n          `,\r\n        type: 'success'\r\n      })\r\n    },\r\n    // reference: src/view/layout/components/Sidebar/SidebarItem.vue\r\n    onlyOneShowingChild(children = [], parent) {\r\n      let onlyOneChild = null\r\n      const showingChildren = children.filter(item => !item.hidden)\r\n\r\n      // When there is only one child route, the child route is displayed by default\r\n      if (showingChildren.length === 1) {\r\n        onlyOneChild = showingChildren[0]\r\n        onlyOneChild.path = path.resolve(parent.path, onlyOneChild.path)\r\n        return onlyOneChild\r\n      }\r\n\r\n      // Show parent if there are no child route to display\r\n      if (showingChildren.length === 0) {\r\n        onlyOneChild = { ... parent, path: '', noShowingChildren: true }\r\n        return onlyOneChild\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.app-container {\r\n  .roles-table {\r\n    margin-top: 30px;\r\n  }\r\n  .permission-tree {\r\n    margin-bottom: 30px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./role.vue?vue&type=template&id=06a995ff&scoped=true&\"\nimport script from \"./role.vue?vue&type=script&lang=js&\"\nexport * from \"./role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./role.vue?vue&type=style&index=0&id=06a995ff&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06a995ff\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}